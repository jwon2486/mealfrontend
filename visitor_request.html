<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>식수 신청 시스템</title>
  <link rel="stylesheet" href="css/visitor_style.css" />
</head>
<body>
  <h2 id="page-title">방문자 식수 신청</h2>
  <div id="deadline-info" class="deadline-info">
        <strong>📌 마감 안내</strong><br />
        <strong><u>금주 식수</u> 마감 시간:</strong><br />
        &nbsp;&nbsp;- <strong>조식: 전날 오전 9시</strong>까지<br />
        &nbsp;&nbsp;- <strong>중식: 당일 오전 10시 30분</strong>까지<br />
        &nbsp;&nbsp;- <strong>석식: 당일 오후 2시 30분</strong>까지<br />
        <strong><u>차주 식수</u> 마감 시간:</strong><br />
        &nbsp;&nbsp;- <strong>금주 수요일 오후 4시</strong>까지 신청/변경 가능<br />
        &nbsp;&nbsp; <strong>※수요일</strong>이 지나면 </strong><strong>신청이 마감되고 차주에 변경가능</strong>합니다.
  </div>

  <!-- ✅ 로그인 사용자 정보 표시 -->
  <div class="login-container">
    <span id="login-user"></span>
    <button id="page-button" onclick="goToMain()">🔙 로그아웃</button>
    <button id="visit-log-button" style="display:none;">로그 조회</button>
  </div>

  <!-- ✅ 상단 신청 입력 영역 -->
  <div class="table-container">
    <table class="visitor-form-table"> <!-- 상단: 식수 신청 테이블 -->
      <thead>
        <tr>
        <th class="col-adate">날짜</th>
        <th class="col-aday">요일</th>
        <th class="col-abreakfast">조식</th>
        <th class="col-alunch">중식</th>
        <th class="col-adinner">석식</th>
        <th class="col-areason">사유</th>
        <th class="col-asave">저장</th>
        </tr>
      </thead>
      <tbody>
        <tr>
        <td class="col-adate"><input type="date" class="date-input" id="visit-date" /></td>
        <td class="col-aday" id="visit-day">-</td>
        <td class="col-abreakfast"><input type="number" id="b-count" min="0" max="50" value="0" /></td>
        <td class="col-alunch"><input type="number" id="l-count" min="0" max="50" value="0" /></td>
        <td class="col-adinner"><input type="number" id="d-count" min="0" max="50" value="0" /></td>
        <td class="col-areason"><input type="text" id="visit-reason" class="reason-input" placeholder="신청 사유" /></td>
        <td class="col-asave"><button id="visit-data-save-btn" onclick="submitVisit()">💾</button></td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- ✅ 신청 내역 표시 영역 -->
  <div class="table-container" style="margin-top: 30px;">
    <h3>신청 내역 (해당 주)</h3>
    <input type="date" id="visit-week-date"> <button id="load-visit-data-btn">조회</button>
    <table class="visitor-summary-table"> <!-- 하단: 신청 내역 테이블 -->
      <thead>
        <tr>
        <th class="col-summary-date">날짜</th>
        <th class="col-summary-day">요일</th>
        <th class="col-summary-breakfast">조식</th>
        <th class="col-summary-lunch">중식</th>
        <th class="col-summary-dinner">석식</th>
        <th class="col-summary-reason">사유</th>
        <th class="col-summary-dept">부서</th>
        <th class="col-summary-requester">신청자</th>
        <th class="col-summary-edit">수정</th>
        <th class="col-summary-delete">삭제</th>
        </tr>
      </thead>
      <tbody id="visit-summary-body">
        <!-- JavaScript에서 동적으로 추가 -->
      </tbody>
      <tbody id="visit-week-table-body">
        <!-- 데이터가 없으면 여기에 <tr><td colspan="7">신청 내역이 없습니다.</td></tr> 추가 -->
      </tbody>
    </table>
  </div>

  <!-- ✅ 공통 스크립트 로딩 -->
  <script src="js/config.js"></script>
  <script src="js/util.js"></script>
  <script src="js/visitor_request.js"></script>
</body>
</html>
