<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>신청 내역 확인</title>
  <link rel="stylesheet" href="css/admin_check.css">
  <script>
    const savedUser = sessionStorage.getItem("currentUser");
    if (!savedUser) {
      location.href = "index.html";
    } else {
      const user = JSON.parse(savedUser);
      if (user.level !== 3) {
        alert("관리자만 접근 가능합니다.");
        location.href = "index.html";
      }
    }
  </script>
</head>
<body>
  <h1>신청 내역 확인</h1>

  <!-- 요약 정보 -->
  <div class="summary" id="summary-box">
    📋 총 신청 인원: <span id="totalPeople">0</span>명 |
    조식: <span id="totalBreakfast">0</span> |
    중식: <span id="totalLunch">0</span> |
    석식: <span id="totalDinner">0</span>
  </div>

  <!-- 기간 선택 -->
  <div class="filter-container">
    <label>시작 날짜: <input type="date" id="startDate"></label>
    <label>종료 날짜: <input type="date" id="endDate"></label>
    <button class="btn-search" onclick="loadCheckData()">조회</button>
    <button onclick="window.location.href='admin_dashboard.html'" class="back-button dashboard-btn">← 관리자 대시보드</button>
  </div>

  <!-- 검색 필터 -->
  <div class="search-container">
    <label>부서: <input type="text" id="filterDept" placeholder="부서"></label>
    <label>사번: <input type="text" id="filterId" placeholder="사번"></label>
    <label>이름: <input type="text" id="filterName" placeholder="이름"></label>
    <button class="btn-search" onclick="filterCheckData()">🔍 검색</button>
    <button class="btn-all" onclick="resetFilter()">🔄 전체보기</button>
    <button class="save-btn" onclick="downloadExcel()">엑셀 다운로드</button>
  </div>

  <!-- 신청 내역 테이블 (edit와 동일: 컨테이너로 감싸서 thead 고정) -->
  <div class="table-container">
    <table id="check-table">
      <thead id="table-head"></thead>
      <tbody id="table-body"></tbody>
    </table>
  </div>

  <div id="toast" class="toast"></div>
  <script src="js/config.js"></script>
  <script src="js/util.js"></script>
  <script src="js/admin_check.js"></script>
  <script src="js/auth.js"></script>
</body>
</html>
