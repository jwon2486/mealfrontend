<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>식수 신청 시스템</title>
  <link rel="stylesheet" href="css/visitor_style.css" />
</head>
<body>
  <h2 id="page-title">방문자 식수 신청</h2>

  <!-- ✅ 로그인 사용자 정보 표시 -->
  <div class="login-container">
    <span id="login-user"></span>
    <button id="page-button" onclick="goToMain()">🔙 로그아웃</button>
  </div>

  <!-- ✅ 상단 신청 입력 영역 -->
  <div class="table-container">
    <table>
      <thead>
        <tr>
          <th>날짜</th>
          <th>요일</th>
          <th>조식</th>
          <th>중식</th>
          <th>석식</th>
          <th id="reason-th">사유</th>
          <th>저장</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><input type="date" class="date-input" id="visit-date" /></td>
          <td id="visit-day">-</td>
          <td><input type="number" id="b-count" min="0" max="50" value="0" /></td>
          <td><input type="number" id="l-count" min="0" max="50" value="0" /></td>
          <td><input type="number" id="d-count" min="0" max="50" value="0" /></td>
          <td><input type="text" id="visit-reason" class="reason-input" placeholder="사유를 입력하세요" /></td>
          <td><button id="visit-data-save-btn" onclick="submitVisit()">💾 저장</button></td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- ✅ 신청 내역 표시 영역 -->
  <div class="table-container" style="margin-top: 30px;">
    <h3>신청 내역 (해당 주)</h3>
    <input type="date" id="visit-week-date"> <button id="load-visit-data-btn">조회</button>
    <table>
      <thead>
        <tr>
          <th>날짜</th>
          <th>요일</th>
          <th>조식</th>
          <th>중식</th>
          <th>석식</th>
          <th id="weekly-reason-th" class="reason-col">사유</th>
          <th>수정</th>
          <th>삭제</th>
        </tr>
      </thead>
      <tbody id="visit-summary-body">
        <!-- JavaScript에서 동적으로 추가 -->
      </tbody>
      <tbody id="visit-week-table-body">
        <!-- 데이터가 없으면 여기에 <tr><td colspan="7">신청 내역이 없습니다.</td></tr> 추가 -->
      </tbody>
    </table>
  </div>

  <!-- ✅ 공통 스크립트 로딩 -->
  <script src="js/config.js"></script>
  <script src="js/util.js"></script>
  <script src="js/visitor_request.js"></script>
</body>
</html>
